--- a/Python/pystate.c
+++ b/Python/pystate.c
@@ -2742,6 +2742,22 @@ PyGILState_Check(void)
     return (tstate == tcur);
 }

+#ifdef __wasi__
+/* WASI: Single-threaded environment - GIL state operations are no-ops.
+   We always "hold" the GIL since there's only one thread. */
+
+PyGILState_STATE
+PyGILState_Ensure(void)
+{
+    return PyGILState_LOCKED;  /* Always locked in single-threaded WASI */
+}
+
+void
+PyGILState_Release(PyGILState_STATE oldstate)
+{
+    (void)oldstate;  /* No-op in single-threaded WASI */
+}
+#else  /* !__wasi__ */
 PyGILState_STATE
 PyGILState_Ensure(void)
 {
@@ -2839,6 +2855,7 @@ PyGILState_Release(PyGILState_STATE oldstate)
         PyEval_SaveThread();
     }
 }
+#endif  /* __wasi__ */

 /**************/
 /* Deprecated */
